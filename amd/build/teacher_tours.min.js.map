{"version":3,"file":"teacher_tours.min.js","sources":["../src/teacher_tours.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle. If not, see <http://www.gnu.org/licenses/>.\n/**\n * JavaScript for handling tour creation via button click.\n *\n * @module block_teacher_tours/teacher_tours\n * @copyright 2025 Your Name <your.email@example.com>\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/ajax', 'core/str'], // 'core/templates'\n    function ($, Ajax, Str) {\n\n        // JSON object that holds the information for the tour that is being sent to an endpoint when the teacher hits save\n        let tourObject = {\n            steps: [\n                /*\n                template step object\n                {\n                    title: '',\n                    content: '',\n                    targettype: '2',\n                    targetvalue: '',\n                    placement: '',\n                    orphan: 'true',\n                    backdrop: '',\n                    reflex: 'false',\n                    config: '',\n                } */\n            ],\n            name: '',\n            description: '',\n            pathmatch: '',\n            enabled: '',\n            filter_values: '',\n            sortorder: '',\n        };\n\n        let stickyTarget = null;\n        let sticky = false;\n\n        let currentStepObject = {};\n\n        // Init the tourobject and starts the editor\n        const init = function (courseid, customTours) {\n            init_styles();\n            initializeEventBindings();\n            Object.values(customTours).forEach(tour => {\n                console.log('tour', tour);\n                setPlacements(tour.placementid, courseid); //replace courseid with tour.id\n            });\n            resetTourObject(courseid);\n        };\n\n        // Starts the picker at first\n        const startEditor = function () {\n            // Hide the create new tour button when editing\n            $('#start-tour-creation').hide();\n            $('#start-sticky-creation').hide();\n            $('#step-creation').hide();\n            // Show the tour editor interface\n            $('#tour-editor').show();\n            if (sticky) {\n                highlightPlacements();\n            } else {\n                highlightElements();\n            }\n        };\n\n        // Show current step indicator\n        const showCurrentStepIndicator = function (elementText) {\n            $('#current-step-element').text(elementText);\n            $('#current-step-indicator').show();\n        };\n\n        // Show current step indicator\n        const showTourStepsPreview = function () {\n            $('.tour-preview').html('');\n            tourObject.steps.forEach((step, index) => {\n                $('.tour-preview')\n                    .append('<div class=\"tour-step-preview\" data-step-index=\"' + index + '\">Step ' + (index + 1) +\n                        ' <strong> ' + step.targetvalue + ':</strong> ' + step.title +\n                        ' <i class=\"fa fa-pencil edit-step-icon\" style=\"float: right; cursor: pointer; margin-left: 10px;\">' +\n                        '</i></div>');\n            });\n            $('.tour-preview').show();\n        };\n\n        // Hide current step indicator\n        const hideCurrentStepIndicator = function () {\n            $('#current-step-indicator').hide();\n        };\n\n        const resetCurrentStepObject = function () {\n            currentStepObject = {};\n        };\n\n        // Handle tour toggle switches\n        const handleTourToggle = function (tourId, enabled) {\n            // console.log('Toggling tour', tourId, 'to', enabled ? 'enabled' : 'disabled');\n\n            // Make AJAX call to backend to save the state\n            Ajax.call([{\n                methodname: 'block_teacher_tours_toggle_tour_enabled',\n                args: {tourid: tourId, enabled: enabled}\n            }])[0].done(function (response) {\n                if (response.success) {\n                    // Update the UI based on the actual state from server.\n                    const tourCard = $(`[data-tour-id=\"${tourId}\"]`);\n                    const statusElement = tourCard.find('.tour-status');\n\n                    if (response.enabled) {\n                        Str.get_string('enabled', 'block_teacher_tours')\n                            .then(function (enabledText) {\n                                statusElement.html('<i class=\"fa fa-check-circle text-success\"></i> ' + enabledText);\n                            });\n                        tourCard.find('.tour-toggle').prop('checked', true);\n                    } else {\n                        Str.get_string('disabled', 'block_teacher_tours')\n                            .then(function (disabledText) {\n                                statusElement.html('<i class=\"fa fa-times-circle text-muted\"></i> ' + disabledText);\n                            });\n                        tourCard.find('.tour-toggle').prop('checked', false);\n                    }\n                    // console.log('Tour toggle successful');\n                } else {\n                    // Revert the toggle if the operation failed\n                    // console.error('Failed to toggle tour');\n                    const tourCard = $(`[data-tour-id=\"${tourId}\"]`);\n                    tourCard.find('.tour-toggle').prop('checked', !enabled);\n                    alert('Failed to update tour status. Please try again.');\n                }\n            }).fail(function () {\n                // console.error('Error toggling tour:', error);\n                // Revert the toggle on error\n                const tourCard = $(`[data-tour-id=\"${tourId}\"]`);\n                tourCard.find('.tour-toggle').prop('checked', !enabled);\n                alert('Error updating tour status. Please try again.');\n            });\n        };\n\n        // Handle tour editing\n        const handleTourEdit = function (tourId) {\n            // console.log('Editing tour', tourId);\n            // TODO: Should open the form in the backend to edit the tour\n            alert('Edit functionality will be implemented when backend is ready. Tour ID: ' + tourId);\n        };\n\n        // Handle tour deletion\n        const handleTourDelete = function (tourId) {\n            // console.log('Deleting tour', tourId);\n            if (confirm('Are you sure you want to delete this tour? This action cannot be undone.')) {\n                // Make AJAX call to backend to delete the tour\n                Ajax.call([{\n                    methodname: 'block_teacher_tours_delete_tour',\n                    args: {tourid: tourId}\n                }])[0].done(function (response) {\n                    if (response.success) {\n                        // Remove the card from UI with animation\n                        $(`[data-tour-id=\"${tourId}\"]`).fadeOut(300, function () {\n                            $(this).remove();\n                            // Check if no tours left\n                            if ($('.tour-card').length === 0) {\n                                $('.existing-tours').hide();\n                            }\n                        });\n                    } else {\n                        alert('Failed to delete tour. Please try again.');\n                    }\n                }).fail(function () {\n                    alert('Error deleting tour. Please try again.');\n                });\n            }\n        };\n\n        // Initialise style class for highlights\n        const hexToRgba = function (hex, opacity){\n            // Remove '#' if present\n            hex = hex.replace(/^#/, '');\n\n            // Parse r, g, b values\n            let r = parseInt(hex.substring(0, 2), 16);\n            let g = parseInt(hex.substring(2, 4), 16);\n            let b = parseInt(hex.substring(4, 6), 16);\n\n            return `rgba(${r}, ${g}, ${b}, ${opacity})`;\n        };\n\n        const init_styles = function () {\n            const colors = window.teachertoursColors;\n            const style = document.createElement('style');\n\n            const moduleHighlightopacity03 = hexToRgba(colors.moduleHighlight, 0.3);\n            const moduleHighlightopacity05 = hexToRgba(colors.moduleHighlight, 0.5);\n\n            const sectionHighlightopacity03 = hexToRgba(colors.sectionHighlight, 0.3);\n            const sectionHighlightopacity05 = hexToRgba(colors.sectionHighlight, 0.5);\n\n            style.textContent = `\n                /* Tour creation highlighting */\n                .module-highlight {\n                    background-color: ${moduleHighlightopacity03};\n                    border: 1px solid ${colors.moduleHighlight};\n                    cursor: pointer;\n                    transition: all 0.3s ease;\n                    border-radius: 1rem;\n                }\n                .module-highlight:hover {\n                    background-color: ${moduleHighlightopacity05};\n                    transform: scale(1.02);\n                }\n                .section-highlight {\n                    background-color: ${sectionHighlightopacity03};\n                    border: 1px solid ${colors.sectionHighlight};\n                    cursor: pointer;\n                    transition: all 0.3s ease;\n                    border-radius: 1rem;\n                }\n\n                .section-highlight:hover {\n                    background-color: ${sectionHighlightopacity05};\n                    transform: scale(1.02);\n                }\n\n                /* Tour Preview Styling */\n                .tour-preview {\n                    margin-bottom: 20px;\n                    background-color: #fff;\n                }\n\n                .tour-step-preview {\n                    display: flex;\n                    align-items: center;\n                    padding: 10px 15px;\n                    margin-bottom: 8px;\n                    background-color: #f8f9fa;\n                    border: 1px solid #e9ecef;\n                    border-radius: 6px;\n                    border-left: 4px solid ${colors.moduleHighlight};\n                    font-size: 14px;\n                    transition: all 0.2s ease;\n                }\n\n                .tour-step-preview:hover {\n                    background-color: #e9ecef;\n                    transform: translateX(2px);\n                }\n\n                .tour-step-preview:last-child {\n                    margin-bottom: 0;\n                }\n\n                .tour-step-preview strong {\n                    color: #495057;\n                    margin-right: 8px;\n                }\n\n                .tour-step-preview .edit-step-icon {\n                    color: #6c757d;\n                    transition: color 0.2s;\n                    margin-left: auto;\n                }\n\n                    .tour-step-preview .edit-step-icon:hover {\n                    color: #007bff;\n                    cursor: pointer;\n                }\n\n                /* Instructions Styling */\n                .editor-instructions {\n                    background-color: #e7f3ff;\n                    border: 1px solid #b8daff;\n                    border-radius: 6px;\n                    padding: 12px 16px;\n                    margin-bottom: 20px;\n                    color: ${colors.moduleHighlight};\n                    font-size: 14px;\n                    display: flex;\n                    align-items: center;\n                }\n\n                .editor-instructions::before {\n                    content: \"💡\";\n                    margin-right: 10px;\n                    font-size: 16px;\n                }\n\n                /* Current Step Indicator */\n                .current-step-indicator .alert {\n                    margin-bottom: 15px;\n                    border-left: 4px solid #17a2b8;\n                }\n\n                /* Add Step Button Container */\n                .add-step-container {\n                    text-align: center;\n                    padding: 20px;\n                    border: 2px dashed #dee2e6;\n                    border-radius: 8px;\n                    background-color: #f8f9fa;\n                    margin-top: 15px;\n                }\n\n                .add-step-container:hover {\n                    border-color: ${colors.moduleHighlight};\n                    background-color: #e7f3ff;\n                }\n\n                /* Text Editor Styling */\n                .text-editor {\n                    margin-top: 20px;\n                    padding: 20px;\n                    border: 1px solid #dee2e6;\n                    border-radius: 8px;\n                    background-color: white;\n                    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n                }\n\n                .text-editor-header {\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                    margin-bottom: 20px;\n                    padding-bottom: 15px;\n                    border-bottom: 1px solid #dee2e6;\n                }\n\n                /* Tour Cards Styling */\n                .tour-list {\n                    display: flex;\n                    flex-direction: column;\n                    gap: 15px;\n                    margin-bottom: 20px;\n                }\n\n                .tour-card {\n                    background: white;\n                    border: 1px solid #dee2e6;\n                    border-radius: 8px;\n                    padding: 16px;\n                    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n                    transition: all 0.2s ease;\n                }\n\n                .tour-card:hover {\n                    border-color: ${colors.moduleHighlight};\n                    box-shadow: 0 4px 8px rgba(0, 123, 255, 0.15);\n                    transform: translateY(-1px);\n                }\n\n                .tour-card-header {\n                    margin-bottom: 12px;\n                }\n\n                .tour-info {\n                    flex: 1;\n                    margin-right: 20px;\n                }\n\n                .tour-name {\n                    font-size: 16px;\n                    font-weight: 600;\n                    color: #343a40;\n                    margin: 0 0 8px 0;\n                    line-height: 1.3;\n                }\n\n                .tour-description {\n                    color: #6c757d;\n                    font-size: 14px;\n                    margin: 0;\n                    line-height: 1.4;\n                    max-width: 400px;\n                }\n\n                .tour-controls {\n                    display: flex;\n                    justify-content: space-between;\n                    flex-shrink: 0;\n                }\n\n                .form-switch {\n                padding-top: .25rem;\n                    margin-bottom: 0;\n                }\n\n                .form-switch .form-check-input {\n                    width: 2.5em;\n                    height: 1.25em;\n                }\n\n                .form-switch .form-check-label {\n                    font-size: 13px;\n                    margin-left: 10px;\n                    color: #6c757d;\n                }\n\n                .tour-toggle:checked+.form-check-label .enabled-text {\n                }\n\n                .tour-toggle:not(:checked)+.form-check-label .enabled-text {\n                    display: none;\n                }\n\n                .tour-toggle:checked+.form-check-label .disabled-text {\n                    display: none;\n                }\n\n                .tour-card-footer {\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                    border-top: 1px solid #f8f9fa;\n                }\n\n                .tour-status {\n                    display: flex;\n                    align-items: center;\n                    gap: 6px;\n                    font-size: 13px;\n                }\n                \n                .tour-actions {\n                    display: flex;\n                    flex-direction: column;\n                    gap: 12px;\n                }\n\n                /* Empty state for no tours */\n                .existing-tours:empty::before {\n                    content: \"No tours created yet. Click 'Create New Tour' to get started.\";\n                    display: block;\n                    text-align: center;\n                    color: #6c757d;\n                    font-style: italic;\n                    padding: 40px 20px;\n                    background: #f8f9fa;\n                    border-radius: 8px;\n                    border: 2px dashed #dee2e6;\n                }\n\n                .btn.btn-sm.btn-outline-primary.section-sticky-highlight {\n                    border-style: dashed;\n                    position: absolute;\n                    top: -0.5rem;\n                    right: -0.5rem;\n                    background: white;\n                }\n\n                .btn.btn-sm.btn-outline-primary.section-sticky-highlight:hover {\n                    color: inherit;\n                }\n \n                .btn.btn-sm.btn-outline-primary.section-sticky-button {\n                    border-style: solid;\n                    position: absolute;\n                    top: -0.5rem;\n                    right: -0.5rem;\n                    background: white;\n                }\n \n                .btn.btn-sm.btn-outline-primary.section-sticky-button:hover {\n                    color: inherit;\n                }\n \n                .btn.btn-sm.btn-outline-primary.header-sticky-highlight {\n                    border-style: dashed;\n                    position: absolute;\n                    top: 0;\n                    right: 0;\n                    background: white;\n                }\n \n                .btn.btn-sm.btn-outline-primary.header-sticky-button {\n                    border-style: solid;\n                    position: absolute;\n                    top: 0;\n                    right: 0;\n                    background: white;\n                }\n \n                .btn.btn-sm.btn-outline-primary.header-sticky-highlight:hover {\n                    color: inherit;\n                }\n \n                .btn.btn-sm.btn-outline-primary.header-sticky-button:hover {\n                    color: inherit;\n                }\n \n            `;\n\n            document.head.appendChild(style);\n        };\n\n        // Store event handlers for specific removal\n        const tourEventHandlers = {\n            stickySelectClick: function (e) {\n                e.preventDefault();\n                e.stopPropagation();\n                const element = e.currentTarget;\n                if (element.classList.contains('section-sticky-highlight')) {\n                    element.classList.remove('section-sticky-highlight');\n                    element.classList.add('section-sticky-button');\n                    Str.get_string('selectplacement', 'block_teacher_tours').then(function (text) {\n                        element.html(text);\n                    });\n                } else if (element.classList.contains('header-sticky-highlight')) {\n                    element.classList.remove('header-sticky-highlight');\n                    element.classList.add('header-sticky-button');\n                    Str.get_string('selectplacement', 'block_teacher_tours').then(function (text) {\n                        element.html(text);\n                    });\n                }\n                //todo element get parent and get id\n                let parent = element.parentElement;\n                stickyTarget = parent.getAttribute('id');\n                removeHighlighting();\n                sticky = false;\n                highlightElements();\n            },\n            stickyStartClick: function (e) {\n                e.preventDefault();\n                e.stopPropagation();\n                const element = e.currentTarget;\n                let customtourid = element.dataset.customtourid;\n                //create_tour_from_custom\n                Ajax.call([{\n                methodname: 'block_teacher_tours_create_tour_from_custom',\n                args: { courseid: customtourid},//TODO replace courseid with custom tour id from plugin table\n            }])[0].then(function (response) {\n                console.log(response);\n                //If ok reset the tourObject, if not show error\n                if (!response && !response.status === 'ok') {\n                    alert('Error saving tour: ' + (response.message || 'Unknown error'));\n                }\n                //reload the page\n                window.location.reload();\n            });\n//TODO START TOUR WITH CUSTOM TOUR ID\n            },\n            sectionClick: function (e) {\n                e.preventDefault();\n                e.stopPropagation();\n                const section = e.currentTarget;\n                currentStepObject = {\n                    targettype: '0',\n                    targetvalue: '#' + section.getAttribute('id'),\n                    placement: 'right',\n                    orphan: 'false',\n                    backdrop: 'true',\n                    reflex: 'false',\n                };\n                // Show current step indicator\n                showCurrentStepIndicator('Section: ' + section.getAttribute('data-sectionname'));\n                removeHighlighting();\n                startTextEditor();\n            },\n            moduleClick: function (e) {\n                e.preventDefault();\n                e.stopPropagation();\n                const mod = e.currentTarget;\n                currentStepObject = {\n                    targettype: '0',\n                    targetvalue: '#' + mod.getAttribute('id'),\n                    placement: 'right',\n                    orphan: 'false',\n                    backdrop: 'true',\n                    reflex: 'false',\n                };\n                // Show current step indicator\n                // check if direct child of mod has data-activityname\n                showCurrentStepIndicator('Module: ' + mod.childNodes[1].getAttribute('data-activityname'));\n\n                removeHighlighting();\n                startTextEditor();\n            }\n        };\n\n        // Highlight the elements\n        const highlightElements = function () {\n            // Highlight the sections in light green\n            // Highlight the mods in blue\n            document.querySelectorAll('[id^=\"section-\"]').forEach(section => {\n                section.classList.add('section-highlight');\n                section.addEventListener('click', tourEventHandlers.sectionClick);\n            });\n            document.querySelectorAll('[id^=\"module-\"]').forEach(mod => {\n                mod.classList.add('module-highlight');\n                mod.addEventListener('click', tourEventHandlers.moduleClick);\n            });\n        };\n\n        const setPlacements = function (placementid, customtourid) {\n            Str.get_string('touravailable', 'block_teacher_tours').then(function (text) {\n                if (placementid.startsWith('section-')) {\n                    document.querySelectorAll('[id=\"' + placementid + '\"]').forEach(section => {\n                        const button = document.createElement('button');\n                        button.dataset.customtourid = customtourid;\n                        button.className = 'btn btn-sm btn-outline-primary section-sticky-button';\n                        button.textContent = text + ' ';\n                        const icon = document.createElement('i');\n                        icon.className = 'fa fa-question-circle';\n                        button.append(icon);\n                        section.style.position = 'relative';\n                        section.prepend(button);\n                        button.addEventListener('click', tourEventHandlers.stickyStartClick);\n                    });\n                } else if (placementid === 'page-header') {\n                    document.querySelectorAll('[id=\"page-header\"]').forEach(header => {\n                        const button = document.createElement('button');\n                        button.dataset.customtourid = customtourid;\n                        button.className = 'btn btn-sm btn-outline-primary header-sticky-button';\n                        button.textContent = text + ' ';\n                        const icon = document.createElement('i');\n                        icon.className = 'fa fa-question-circle';\n                        button.append(icon);\n                        header.style.position = 'relative';\n                        header.prepend(button);\n                        button.addEventListener('click', tourEventHandlers.stickyStartClick);\n                    });\n                }\n            });\n        };\n\n        // Highlight the elements\n        const highlightPlacements = function () {\n            // TODO consider case of multiple tours on one element\n            // \"Highlight\" the section placements and the course header placement\n            // onclick remove pseudo elements and handle click in differenct function\n            Str.get_string('selectplacement', 'block_teacher_tours').then(function (text) {\n                document.querySelectorAll('[id^=\"section-\"]').forEach(section => {\n                    const button = document.createElement('button');\n                    button.className = 'btn btn-sm btn-outline-primary section-sticky-highlight';\n                    button.textContent = text + ' ';\n                    const icon = document.createElement('i');\n                    icon.className = 'fa fa-question-circle';\n                    button.append(icon);\n                    section.style.position = 'relative';\n                    section.prepend(button);\n                    button.addEventListener('click', tourEventHandlers.stickySelectClick);\n                });\n                document.querySelectorAll('[id=\"page-header\"]').forEach(mod => {\n                    const button = document.createElement('button');\n                    button.className = 'btn btn-sm btn-outline-primary header-sticky-highlight';\n                    button.textContent = text + ' ';\n                    const icon = document.createElement('i');\n                    icon.className = 'fa fa-question-circle';\n                    button.append(icon);\n                    mod.style.position = 'relative';\n                    mod.prepend(button);\n                    button.addEventListener('click', tourEventHandlers.stickySelectClick);\n                });\n            });\n        };\n\n        // The second step on creating a step for the tour is creating a text that should show when the step is active\n        const startTextEditor = function (editIndex = null) {\n            $('#text-editor').show();\n            if (editIndex === null) {\n                clearTextEditor();\n            }\n            $('#save-tour').hide();\n            $('#step-title').focus();\n\n            // Store edit index for later use\n            $('#text-editor').data('edit-index', editIndex);\n        };\n\n        const clearTextEditor = function () {\n            $('#step-title').val('');\n            $('#step-content').val('');\n            // $('#step-placement').val('right');\n            // $('#step-backdrop').prop('checked', true);\n            // $('#step-orphan').prop('checked', false);\n            // $('#step-reflex').prop('checked', false);\n        };\n\n        const removeHighlighting = function () {\n            if (sticky) {\n                document.querySelectorAll('.section-sticky-highlight').forEach(section => {\n                    section.remove();\n                });\n                document.querySelectorAll('.header-sticky-highlight').forEach(mod => {\n                    mod.remove();\n                });\n            } else {\n                // Remove the highlighting from the elements and their specific event listeners\n                document.querySelectorAll('[id^=\"section-\"]').forEach(section => {\n                    section.classList.remove('section-highlight');\n                    section.removeEventListener('click', tourEventHandlers.sectionClick);\n                });\n                document.querySelectorAll('[id^=\"module-\"]').forEach(mod => {\n                    mod.classList.remove('module-highlight');\n                    mod.removeEventListener('click', tourEventHandlers.moduleClick);\n                });\n            }\n\n        };\n\n        // Send the tourObject to the endpoint\n        const saveTour = function () {\n            $('#save-tour').prop('disabled', true).text('Saving...');\n            // Send the tourObject to the endpoint\n            let argsObj = {};\n            if (stickyTarget) {\n                tourObject.placementid = stickyTarget;\n                tourObject.custom = true;\n                argsObj = { tour: tourObject };\n            } else {\n                tourObject.custom = false;\n                argsObj = { tour: tourObject };\n            }\n            Ajax.call([{\n                methodname: 'block_teacher_tours_save_tour',\n                args: argsObj,\n            }])[0].then(function (response) {\n                console.log(response);\n                //If ok reset the tourObject, if not show error\n                if (!response && !response.status === 'ok') {\n                    alert('Error saving tour: ' + (response.message || 'Unknown error'));\n                }\n                resetTourObject();\n\n                $('#tour-editor').hide();\n                $('#start-tour-creation').show();\n                $('#start-sticky-creation').show();\n                $('#step-creation').show();\n                hideCurrentStepIndicator();\n                clearTextEditor();\n                removeHighlighting();\n                $('.tour-preview').html('');\n                $('.tour-preview').hide();\n                Str.get_string('savetour', 'block_teacher_tours')\n                    .then(function (text) {\n                        $('#save-tour').prop('disabled', false).html('<i class=\"fa fa-save\"></i> ' + text);\n                    });\n            });\n        };\n\n        // Reset the tourObject\n        const resetTourObject = function (courseid) {\n            stickyTarget = null;\n            sticky = false;\n\n            tourObject = {\n                steps: [],\n                name: 'tour for course ' + courseid,\n                description: 'A tour for course ' + courseid,\n                pathmatch: '/course/view.php?id=' + courseid,\n                enabled: '',\n                filter_values: '',\n                sortorder: '',\n            };\n        };\n\n        // Add a step to the tourObject\n        const addStep = function (stepData) {\n            tourObject.steps.push(stepData || {});\n        };\n\n        // Edit an existing step\n        const editStep = function (stepIndex) {\n            if (stepIndex < tourObject.steps.length) {\n                const step = tourObject.steps[stepIndex];\n\n                // Populate the form with existing step data\n                $('#step-title').val(step.title);\n                $('#step-content').val(step.content);\n\n                // Show the text editor with edit mode\n                startTextEditor(stepIndex);\n\n                // Hide tour save button while editing\n                $('#save-tour').hide();\n\n                // Update current step object for any placement changes\n                currentStepObject = {\n                    targettype: step.targettype,\n                    targetvalue: step.targetvalue,\n                    placement: step.placement,\n                    orphan: step.orphan,\n                    backdrop: step.backdrop,\n                    reflex: step.reflex\n                };\n\n                // Show current step indicator\n                showCurrentStepIndicator('Editing: ' + step.targetvalue);\n            }\n        };\n\n        // Save the current step to the tour object\n        const saveStep = function () {\n            // Get values from the form\n            const title = $('#step-title').val();\n            const content = $('#step-content').val();\n            // TODO maybe\n            // const placement = $('#step-placement').val();\n            // const backdrop = $('#step-backdrop').prop('checked') ? 'true' : 'false';\n            // const orphan = $('#step-orphan').prop('checked') ? 'true' : 'false';\n            // const reflex = $('#step-reflex').prop('checked') ? 'true' : 'false';\n\n            // Check if we're editing an existing step\n            const editIndex = $('#text-editor').data('edit-index');\n\n            if (editIndex !== null && editIndex !== undefined) {\n                // Update existing step\n                tourObject.steps[editIndex].title = title;\n                tourObject.steps[editIndex].content = content;\n                showTourStepsPreview();\n                clearTextEditor();\n                $('#text-editor').hide();\n                $('#save-tour').show();\n                $('#text-editor').data('edit-index', null);\n            } else {\n                // Update the current step object with form values\n                currentStepObject.title = title;\n                currentStepObject.content = content;\n                // currentStepObject.placement = placement;\n                // currentStepObject.backdrop = backdrop;\n                // currentStepObject.orphan = orphan;\n                // currentStepObject.reflex = reflex;\n\n                // Add the step to the tour\n                addStep(currentStepObject);\n            }\n        };\n\n        // Initialize event bindings\n        const initializeEventBindings = function () {\n            // Bind click event to start tour creation button\n            $(document).on('click', '#start-tour-creation', function (e) {\n                e.preventDefault();\n                startEditor();\n            });\n\n            $(document).on('click', '#start-sticky-creation', function (e) {\n                e.preventDefault();\n                sticky = true;\n                startEditor();\n            });\n\n\n            // Bind click event to save tour button\n            $(document).on('click', '#save-tour', function (e) {\n                e.preventDefault();\n                saveTour();\n            });\n\n            // Bind click event to save step button\n            $(document).on('click', '#save-step', function (e) {\n                e.preventDefault();\n                saveStep();\n                // Hide the text editor\n                $('#text-editor').hide();\n                $('#save-tour').show();\n                // Reset for next step\n                showTourStepsPreview();\n                hideCurrentStepIndicator();\n                resetCurrentStepObject();\n                // Restart the editor to pick the next element\n                startEditor();\n            });\n\n            // Bind click event to edit step icon\n            $(document).on('click', '.edit-step-icon', function (e) {\n                e.preventDefault();\n                e.stopPropagation();\n                const stepIndex = $(this).parent().data('step-index');\n                editStep(stepIndex);\n            });\n\n            // Bind click event to cancel step edit button\n            $(document).on('click', '#cancel-step-edit', function (e) {\n                e.preventDefault();\n                hideCurrentStepIndicator();\n                resetCurrentStepObject();\n                $('#text-editor').hide();\n                startEditor();\n            });\n\n            // Bind click event to cancel tour creation button\n            $(document).on('click', '#cancel-tour-creation', function (e) {\n                e.preventDefault();\n                $('#tour-editor').hide();\n                $('#start-sticky-creation').show();\n                $('#start-tour-creation').show();\n                hideCurrentStepIndicator();\n                resetTourObject();\n                $('.tour-preview').html('');\n                $('.tour-preview').hide();\n\n            });\n\n            $(document).on('click', '#step-creation', function () {\n                startEditor();\n            });\n\n            // Bind events for tour management\n            $(document).on('change', '.tour-toggle', function () {\n                const tourId = $(this).data('tour-id');\n                const enabled = $(this).is(':checked');\n                handleTourToggle(tourId, enabled);\n            });\n\n            $(document).on('click', '.edit-tour', function (e) {\n                e.preventDefault();\n                const tourId = $(this).data('tour-id');\n                handleTourEdit(tourId);\n            });\n\n            $(document).on('click', '.delete-tour', function (e) {\n                e.preventDefault();\n                const tourId = $(this).data('tour-id');\n                handleTourDelete(tourId);\n            });\n        };\n\n        // Return public API\n        return {\n            sticky: sticky,\n            currentStepObject: currentStepObject,\n            tourObject: tourObject,\n            init: init,\n            startEditor: startEditor,\n            resetTourObject: resetTourObject,\n            addStep: addStep,\n            saveStep: saveStep,\n            saveTour: saveTour,\n            startTextEditor: startTextEditor,\n            highlightElements: highlightElements,\n            initializeEventBindings: initializeEventBindings\n        };\n    }\n);\n"],"names":["define","$","Ajax","Str","tourObject","steps","name","description","pathmatch","enabled","filter_values","sortorder","stickyTarget","sticky","currentStepObject","startEditor","hide","show","highlightPlacements","highlightElements","showCurrentStepIndicator","elementText","text","showTourStepsPreview","html","forEach","step","index","append","targetvalue","title","hideCurrentStepIndicator","resetCurrentStepObject","hexToRgba","hex","opacity","replace","parseInt","substring","init_styles","colors","window","teachertoursColors","style","document","createElement","moduleHighlightopacity03","moduleHighlight","moduleHighlightopacity05","sectionHighlightopacity03","sectionHighlight","sectionHighlightopacity05","textContent","head","appendChild","tourEventHandlers","e","preventDefault","stopPropagation","element","currentTarget","classList","contains","remove","add","get_string","then","parent","parentElement","getAttribute","removeHighlighting","customtourid","dataset","call","methodname","args","courseid","response","console","log","status","alert","message","location","reload","section","targettype","placement","orphan","backdrop","reflex","startTextEditor","mod","childNodes","querySelectorAll","addEventListener","setPlacements","placementid","startsWith","button","className","icon","position","prepend","header","editIndex","arguments","length","undefined","clearTextEditor","focus","data","val","removeEventListener","saveTour","prop","argsObj","custom","tour","resetTourObject","addStep","stepData","push","saveStep","content","initializeEventBindings","on","stepIndex","editStep","this","tourId","tourid","done","success","tourCard","statusElement","find","enabledText","disabledText","fail","handleTourToggle","is","handleTourEdit","confirm","fadeOut","handleTourDelete","init","customTours","Object","values"],"mappings":"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"}